
How to Set Connectivity:

Step 1 :

Establish the connection to the database by specifying the driver, as Class.forName(“JDBCDriver”);

When you need to use the TYPE I Driver, you have to include the following statement,

For typeI driver

 Class.forName(“sun.jdbc.odbc.JdbcOdbcDriver”);//specify the type of drivername

After specifying the Driver, you have to establish the connection as below,

Connection con = DriverManager.getConnection(“jdbc:odbc:dsn”,Username,Password);//specify connection url

Connectionàinterface used to connect application with database provided with vendor id username and password

DriverManageràclass used to Load your drivers


Type 1 driver:

MYSQL

Class.forName("com.mysql.jdbc.Driver");

Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/databasename","root","root");


copy the jar file and put inside the project


Step 2:

            Executing the sql statement.  Three interfaces that are Statement, PreparedStatement, CallableStatement.


Statement Interface:

Used for executing static SQL statements and returning the result it produces.

Syntax: public interface Statement

            It is used for creating, altering, and dropping the table, that is, it is mainly used for DDL operation.

            Statement st = con.createStatemen();//invoked using this method

Methods:

Ø  void clear()

Ø  boolean execute(String SQL)  It executes any kind of SQL statements using PreparedStatement object.

Ø  ResultSet executeQuery(String SQL)  It executes the SELECT query, and returns the ResultSet object generated by the query.

Ø  int executeUpdate(String SQL)  It executes the DML statements, and returns the number of rows affected.

 

PreparedStatement Interface:

            It is used to execute both static and dynamic SQL statement.

Syntax: public interface PreparedStatement extends Statement

            PreparedStatement st = con.prepareStatement(“insert into emp values(1, “Asha”)); 

The methods present in the

Ø  ResultSet metadata getMetadata ()

Ø  void setString(int i, String s)  It sets the designated parameter value as String.

Ø  void setInt(int i, int s)  It sets the designated parameter value as Int.

Ø  void setFloat(int i, float s)

Ø  void setDouble(int i, double s)

Ø  void setByte(int i, byte s)

Ø  void setLong(int i, long s)

Ø  void setBoolean(int i, boolean s)

Ø  void setShort(int i, short s)

Ø  void setDate(int i, date d)

Ø  void setTimeStamp(int i, timestamp t)

Ø  void setNull(int i, int sqltype)  It sets the designated parameter to SQL Null.

Ø  void setBlob(int i, blob b)

Ø  void setClob(int i, clob c)

 

CallableStatement Interface:

      It is used for accessing PL/SQL statements from Java

            Syntax : public interface CallableStatement extends PreparedStatement

CallableStatement st = con.prepareCall(“call <procedurename>(parameters)”);

It is provided with the following methods

Ø  void registerOutParameter(int parameterindex, int sqltype)  It register the out parameter using the JDBC SQL data type.

Ø  void registerOutParameter(String parametername, int sqltype)

Ø  void registerOutParameter(int parameterindex, int sqltype, int scale)  where scale is the size

Ø  void setBoolean(String parametername, boolean x) It sets the designated parameter as boolean value.

Ø  void setInt(String parametername, int x)

Ø  void setDouble(String parametername, double d)

Ø  void setLong(String parametername, long l)

Ø  void setShort(String parametername, short s)

Ø  void setByte(String parametername, byte b)

Ø  void setDate(String parametername, date d)

Ø  void setNull(String parametername, int x)

Ø  void setObject(String parametername, object obj)

Ø  void setTime(String parametername, time t)

Ø  void setTimestamp(String parametername, timestamp t)

Ø  void setString(String parametername, String x)

Ø  boolean getBoolean(int parameterindex (or String parametername)

Ø  int getInt(int parameterindex (or String parametername)

Ø  long getLong(int parameterindex (or String parametername)

Ø  short getShort(int parameterindex (or String parametername)

Ø  int getInt(int parameterindex (or String parametername)

Ø  void addBatch()

Ø  int[] executeBatch()

Step 3: Process the ResultSet

Syntax: Public interface ResultSet

A table of data representing a database resultset which is usually generated by executing the statement that queries the database. A resultset object maintains a cursor pointing to its current row of data. Initially the cursor is positioned before there firstrow the next() moves the cursor to the next row, and it returns false when there are no more rows in the resultset object. Default resultset object is not updatable and has a cursor that moves forward only. Thus you can iterate through it only once and only from first row to the last row. It is possible to produce resultset objects that are scrollable and updatable.

Process the ResultSet Interface, which contains the information about the query.  The methods that present in this interface are

Ø  boolean next()  It moves the cursor to the one row from its current position

Ø  boolean previous() It moves the cursor up to the one row from its current position.

Ø  boolean isFirst()  It checks whether the cursor in the first row or not.

Ø  boolean isLast()  It checks whether the cursor in the last row or not.

 

Ø  double getDouble(int columnindex [String columnname])  It retrieves the value of the designated column in the current row of the ResultSet object as data type Double. The index value is considered based on the select query.

Ø  int getint(int columnindex [String columnname])

Ø  float getFloat(int columnindex [String columnname])

Ø  long getLong(int columnindex [String columnname])

Ø  short getShort(int columnindex [String columnname])

Ø  String getString(int columnindex [String columnname])

Ø  object getObject(int columnindex [String columnname])

Ø  date getDate(int columnindex [String columnname])

Ø  timestamp getTimestamp(int columnindex [String columnname])

 

Step 4:

            Disconnect the database using con.close() method, which closes the connection that established.

Note:

            In order to work with Database Connectivity, you have to import the package java.sql.*, and it throws an exception called SQLException(if there is any error in queries),ClassNotFoundException(jar file not present in folder and driver name specified wrongly)

 

 

Transactions in Database:

Steps:

Set auto commit mode to be False, before performing the operation.
Perform the operations to be done.
After executing the operations, call the commit() method, and if you want to undo the process, then call rollback() method.
Example: (efficient transaction)

      Class.forName(“  ”);

      Connection con = DriverManager.getConnection(“  ”);

      Con.setAutoCommit(false);

      preparedStatment ps = con.pre………..;

      …………….

      …………….

…….………

executeUpdate();

con.commit();

con.rollback();


